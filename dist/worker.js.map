{"version":3,"sources":["../src/worker.js"],"names":["globalAgent","maxSockets","Infinity","start","log","instance","on","doWork","process","shutdown","exit"],"mappings":";;AAAA;;;;AACA;;;;AAEA;;;;AACA;;;;;;AAEA,eAAKA,WAAL,CAAiBC,UAAjB,GAA8BC,QAA9B;AACA,sBAAOC,KAAP;;AAEA,SAASA,KAAT,GAAiB;AAChB,kBAAOC,GAAP,CAAW,MAAX,EAAmB,kBAAnB;;AAEA,KAAIC,WAAW,oBAAf;;AAEAA,UAASC,EAAT,CAAY,OAAZ,EAAqBC,MAArB;AACAC,SAAQF,EAAR,CAAW,SAAX,EAAsBG,QAAtB;;AAEA,UAASF,MAAT,GAAkB;AACjBF,WAASG,OAAT;AACA;AACD,UAASC,QAAT,GAAoB;AACnB,mBAAOL,GAAP,CAAW,MAAX,EAAmB,uBAAnB;AACAI,UAAQE,IAAR;AACA;AACD","file":"worker.js","sourcesContent":["import http from 'http';\nimport throng from 'throng';\n\nimport App from './app';\nimport logger from './modules/logger';\n\nhttp.globalAgent.maxSockets = Infinity;\nthrong(start);\n\nfunction start() {\n\tlogger.log('info', 'Starting worker.');\n\n\tlet instance = App();\n\n\tinstance.on('ready', doWork);\n\tprocess.on('SIGTERM', shutdown);\n\n\tfunction doWork() {\n\t\tinstance.process();\n\t}\n\tfunction shutdown() {\n\t\tlogger.log('info', 'Worker shutting down.');\n\t\tprocess.exit();\n\t}\n}"]}