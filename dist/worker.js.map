{"version":3,"sources":["../src/worker.js"],"names":["globalAgent","maxSockets","Infinity","workers","start","log","instance","on","doWork","process","shutdown","exit"],"mappings":";;AAAA;;;;AACA;;;;AAEA;;;;AACA;;;;;;AAEA,eAAKA,WAAL,CAAiBC,UAAjB,GAA8BC,QAA9B;AACA,sBAAO,EAAEC,SAAS,CAAX,EAAP,EAAuBC,KAAvB;;AAEA,SAASA,KAAT,GAAiB;AAChB,kBAAOC,GAAP,CAAW,MAAX,EAAmB,kBAAnB;;AAEA,KAAIC,WAAW,oBAAf;;AAEAA,UAASC,EAAT,CAAY,OAAZ,EAAqBC,MAArB;AACAC,SAAQF,EAAR,CAAW,SAAX,EAAsBG,QAAtB;;AAEA,UAASF,MAAT,GAAkB;AACjBF,WAASG,OAAT;AACA;AACD,UAASC,QAAT,GAAoB;AACnB,mBAAOL,GAAP,CAAW,MAAX,EAAmB,uBAAnB;AACAI,UAAQE,IAAR;AACA;AACD","file":"worker.js","sourcesContent":["import http from 'http';\r\nimport throng from 'throng';\r\n\r\nimport App from './app';\r\nimport logger from './modules/logger';\r\n\r\nhttp.globalAgent.maxSockets = Infinity;\r\nthrong({ workers: 1 }, start);\r\n\r\nfunction start() {\r\n\tlogger.log('info', 'Starting worker.');\r\n\r\n\tlet instance = App();\r\n\r\n\tinstance.on('ready', doWork);\r\n\tprocess.on('SIGTERM', shutdown);\r\n\r\n\tfunction doWork() {\r\n\t\tinstance.process();\r\n\t}\r\n\tfunction shutdown() {\r\n\t\tlogger.log('info', 'Worker shutting down.');\r\n\t\tprocess.exit();\r\n\t}\r\n}"]}